<!doctype html>
<html lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport"
		  content="width=device-width, user-scalable=no, initial-scale=1.0, maximum-scale=1.0, minimum-scale=1.0">
	<meta http-equiv="X-UA-Compatiable" content="ie=edge">
	<title>Rating</title>
	<link rel="stylesheet" href="https://pro.fontawesome.com/releases/v5.10.0/css/all.css" integrity="sha384-AYmEC3Yw5cVb3ZcuHtOA93w35dYTsvhLPVnYs9eStHfGJvOvKxVfELGroGkvsg+p" crossorigin="anonymous"/>
	<link href='https://fonts.googleapis.com/css?family=Pacifico' rel='stylesheet'>
	<link rel="stylesheet" href="CSS/rating.css"/>
</head>
<body style="background-color: #000; color: #fff;">
	<h1 class="rating_title"  style="font-family: 'Pacifico';font-size: 60px; background-image: linear-gradient(to right, #33ccff, #ff99cc);">Review</h1>
	<section style="padding: 50px 0 50px 0;">
		
		<div class="rating_product_img">
			<picture>
				<img src='images/yuqiu/p1.png'>
			</picture>
		</div>
		<div class="rating_commonts">
			<label>Write a Review</label>
			<textarea id="comment" placeholder="Write something.." style="height:150px" maxlength="255"></textarea>
			<div>
				<span>Rating</span>
				<i class="fa fa-star fa-3x" data-index="0"></i>
				<i class="fa fa-star fa-3x" data-index="1"></i>
				<i class="fa fa-star fa-3x" data-index="2"></i>
				<i class="fa fa-star fa-3x" data-index="3"></i>
				<i class="fa fa-star fa-3x" data-index="4"></i>
			</div>
		</div>
		<div class="clear"></div>
	</section>

	<section style="background-color:#333333; padding: 0 0 50px 0;">
		<div class="review_left" id="fixPara">
		<div class="rating_starts">
			<p>Average Rating: 13 Reviewers</p>
			<h1>5.0</h1>
		</div>
		<div class="reviewRow">
		  <div class="side">
		    <div>5 star</div>
		  </div>
		  <div class="middle">
		    <div class="bar-container">
		      <div class="bar-5"></div>
		    </div>
		  </div>
		  <div class="side right">
		    <div>8</div>
		  </div>
		  <div class="side">
		    <div>4 star</div>
		  </div>
		  <div class="middle">
		    <div class="bar-container">
		      <div class="bar-4"></div>
		    </div>
		  </div>
		  <div class="side right">
		    <div>63</div>
		  </div>
		  <div class="side">
		    <div>3 star</div>
		  </div>
		  <div class="middle">
		    <div class="bar-container">
		      <div class="bar-3"></div>
		    </div>
		  </div>
		  <div class="side right">
		    <div>15</div>
		  </div>
		  <div class="side">
		    <div>2 star</div>
		  </div>
		  <div class="middle">
		    <div class="bar-container">
		      <div class="bar-2"></div>
		    </div>
		  </div>
		  <div class="side right">
		    <div>200</div>
		  </div>
		  <div class="side">
		    <div>1 star</div>
		  </div>
		  <div class="middle">
		    <div class="bar-container">
		      <div class="bar-1"></div>
		    </div>
		  </div>
		  <div class="side right">
		    <div>20</div>
		  </div>
		</div>
		</div>

		<div class="review_right">
			<ul class="review_list">
				<li>
					<div>
						<img src="images/defaultUser.png">
						<span class="username">Username</span>
						<span class="stars">Rating: 4</span>
						<span class="reviewDate">Posted at: 2020-12-10 05:46:29</span>
					</div>
					<div>
						<p>
						star rating system with feedback and review page deisgn usign html and css,css review page design demo,css rating bar,customer project review page design,pure css review page design,html css feedback page design
						</p>
					</div>
				</li>
				<li>
					<div>
						<img src="images/defaultUser.png">
						<span class="username">Username</span>
						<span class="stars">
						<i class="fa fa-star fa-3x" data-index="0"></i>
						<i class="fa fa-star fa-3x" data-index="1"></i>
						<i class="fa fa-star fa-3x" data-index="2"></i>
						<i class="fa fa-star fa-3x" data-index="3"></i>
						<i class="fa fa-star fa-3x" data-index="4"></i>
						</span>
					</div>
					<div>
						<p>
						star rating system with feedback and review page deisgn usign html and css,css review page design demo,css rating bar,customer project review page design,pure css review page design,html css feedback page design
						</p>
					</div>
				</li>
				<li>
					<div>
						<img src="images/defaultUser.png">
						<span class="username">Username</span>
						<span class="stars">
						<i class="fa fa-star fa-3x" data-index="0"></i>
						<i class="fa fa-star fa-3x" data-index="1"></i>
						<i class="fa fa-star fa-3x" data-index="2"></i>
						<i class="fa fa-star fa-3x" data-index="3"></i>
						<i class="fa fa-star fa-3x" data-index="4"></i>
						</span>
					</div>
					<div>
						<p>
						star rating system with feedback and review page deisgn usign html and css,css review page design demo,css rating bar,customer project review page design,pure css review page design,html css feedback page design
						</p>
					</div>
				</li>
				<li>
					<div>
						<img src="images/defaultUser.png">
						<span class="username">Username</span>
						<span class="stars">
						<i class="fa fa-star fa-3x" data-index="0"></i>
						<i class="fa fa-star fa-3x" data-index="1"></i>
						<i class="fa fa-star fa-3x" data-index="2"></i>
						<i class="fa fa-star fa-3x" data-index="3"></i>
						<i class="fa fa-star fa-3x" data-index="4"></i>
						</span>
					</div>
					<div>
						<p>
						star rating system with feedback and review page deisgn usign html and css,css review page design demo,css rating bar,customer project review page design,pure css review page design,html css feedback page design
						</p>
					</div>
				</li>
				<li>
					<div>
						<img src="images/defaultUser.png">
						<span class="username">Username</span>
						<span class="stars">
						<i class="fa fa-star fa-3x" data-index="0"></i>
						<i class="fa fa-star fa-3x" data-index="1"></i>
						<i class="fa fa-star fa-3x" data-index="2"></i>
						<i class="fa fa-star fa-3x" data-index="3"></i>
						<i class="fa fa-star fa-3x" data-index="4"></i>
						</span>
					</div>
					<div>
						<p>
						star rating system with feedback and review page deisgn usign html and css,css review page design demo,css rating bar,customer project review page design,pure css review page design,html css feedback page design
						</p>
					</div>
				</li>
			</ul>
		</div>

		<div class="clear"></div>
	</section>

	<script type="text/javascript">
    window.onload=
        function(){
            var oDiv = document.getElementById("fixPara"),
                H = 0,
                Y = oDiv        
            while (Y) {
                H += Y.offsetTop; 
                Y = Y.offsetParent;
            }
            window.onscroll = function()
            {
                var s = document.body.scrollTop || document.documentElement.scrollTop
                if(s>H) {
                    oDiv.style = "position:fixed;top:0;"
                } else {
                    oDiv.style = ""
                }
            }
        }
	</script>

	<script src="https://code.jquery.com/jquery-3.5.1.min.js" integrity="sha256-9/aliU8dGd2tb6OSsuzixeV4y/faTqgFtohetphbbj0=" crossorigin="anonymous"></script>
	<script>
		var ratedIndex = -1;
		

		$(document).ready(function() {
			resetStarColors();

			if(localStorage.getItem('ratedIndex') != null)
			{
				for(var i=0; i <= parseInt(localStorage.getItem('ratedIndex')); i++)
				{
					$('.fa-star:eq('+i+')').css('color', 'yellow');
				}
			}
			$('.fa-star').on('click', function() {
				ratedIndex = parseInt($(this).data('index'));
				localStorage.setItem('ratedIndex', ratedIndex);
				var review = $.trim($("#comment").val());
				saveToTheDB(review);
			});

			$('.fa-star').mouseover(function() {
				resetStarColors();
				var currentIndex = parseInt($(this).data('index'));

				for(var i = 0; i <= currentIndex; i++)
				{
					$('.fa-star:eq('+i+')').css('color', 'yellow');
				}
			});

			$('.fa-star').mouseleave(function() {
				resetStarColors();
				if(ratedIndex != -1)
				{
					for(var i=0; i <= ratedIndex; i++)
					{
						$('.fa-star:eq('+i+')').css('color', 'yellow');
					}
				}
			});
		});

		var c = '<?php echo $company;?>';
		var p = '<?php echo $product;?>';
		var t = '<?php echo $type;?>';
		var preurl = "rating.php"+"?company="+c+"&product="+p+"&type="+t;
		var myurl="handleAjax.php"+"?company="+c+"&product="+p+"&type="+t;
		function saveToTheDB(review) {
			$.ajax({
				url: myurl,
				method: "POST",
				data: {
					'save': 1,
					'ratedIndex': ratedIndex,
					'review': review
				}, success: function(data) {
					console.log(data);
					if(data == "True")
					{
						alert('Rating and review are succesfully uploaded!');
						window.location.href=preurl;
					}else{
						alert(data);
					}
				}
			});
		}
		function resetStarColors(){
			$('.fa-star').css('color', 'white');
		}

	</script>
</body>
</html>